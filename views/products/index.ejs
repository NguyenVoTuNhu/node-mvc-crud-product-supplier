<%- include('../partials/header') %>

<h1>Products</h1>
<a href="/products/new" class="btn btn-primary mb-2">New Product</a>

<table class="table">
  <thead>
    <tr><th>Name</th><th>Address</th><th>Phone</th><th>Supplier</th><th>Actions</th></tr>
  </thead>
  <tbody>
    <% if (products && products.length > 0) { %>
      <% products.forEach(p => { %>
        <tr>
          <td><%= p.name %></td>
          <td><%= p.address %></td>
          <td><%= p.phone %></td>
          <td><%= p.supplierId ? p.supplierId.name : '' %></td>
          <td>
            <a href="/products/<%= p._id %>/edit" class="btn btn-sm btn-outline-secondary">Edit</a>
            <form action="/products/<%= p._id %>?_method=DELETE" method="post" style="display:inline">
              <button class="btn btn-sm btn-danger" onclick="return confirm('Delete this product?')">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    <% } else { %>
      <tr><td colspan="5">No products found</td></tr>
    <% } %>
  </tbody>
</table>

<%- include('../partials/footer') %>
